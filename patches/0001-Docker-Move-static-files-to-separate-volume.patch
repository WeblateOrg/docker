From e6a69650c37414e02d93bc342ff13f38c31d986f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michal=20=C4=8Ciha=C5=99?= <michal@cihar.com>
Date: Sat, 17 Apr 2021 20:37:27 +0200
Subject: [PATCH 1/1] Docker: Move static files to separate volume

This will allow to run multiple webservers.

See https://github.com/WeblateOrg/docker/issues/700
---
 weblate/settings_docker.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git weblate/settings_docker.py weblate/settings_docker.py
index aed9f58ed5..304fcaf31a 100644
--- weblate/settings_docker.py
+++ weblate/settings_docker.py
@@ -70,6 +70,7 @@ BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
 
 # Data directory
 DATA_DIR = os.environ.get("WEBLATE_DATA_DIR", "/app/data")
+CACHE_DIR = os.environ.get("WEBLATE_CACHE_DIR", "/app/cache")
 
 # Local time zone for this installation. Choices can be found here:
 # http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
@@ -156,7 +157,7 @@ MEDIA_URL = f"{URL_PREFIX}/media/"
 # Absolute path to the directory static files should be collected to.
 # Don't put anything in this directory yourself; store your static files
 # in apps' "static/" subdirectories and in STATICFILES_DIRS.
-STATIC_ROOT = os.path.join(DATA_DIR, "static")
+STATIC_ROOT = os.path.join(CACHE_DIR, "static")
 
 # URL prefix for static files.
 STATIC_URL = f"{URL_PREFIX}/static/"
-- 
2.31.0

